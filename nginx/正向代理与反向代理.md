## 正向代理与反向代理

### 1.概念

- 正向代理

  正向代理是一个位于客户端和目标服务器之间的代理服务器(中间服务器)。为了从原始服务器取得内容，客户端向代理服务器发送一个请求，并且指定目标服务器，之后代理向目标服务器转交并且将获得的内容返回给客户端。正向代理的情况下客户端必须要进行一些特别的设置才能使用。正向代理，真实客户端对服务器隐藏。
  例子：A找C借钱，C不借钱给A，A拖B找C借钱，C只知道是B要借，就借给了B，B把钱又给C，这样，C并不知道真实借钱的人是A。

- 反向代理

  反向代理正好相反。对于客户端来说，反向代理就好像目标服务器。并且客户端不需要进行任何设置。客户端向反向代理发送请求，接着反向代理判断请求走向何处，并将请求转交给服务端，使得这些内容就好似他自己一样，一次客户端并不会感知到反向代理后面的服务，也因此不需要客户端做任何设置，只需要把反向代理服务器当成真正的服务器就好了。
  例子：打电话给10086总机，你无法知道是那个服务人员接听的电话，服务端对客户端隐藏细节



### 2.区别

1. 代理对象不同
   - 正向代理代理客户端
   - 反向代理代理服务器
2. 是否需要指定服务器
   - 正向代理需要主动设置代理服务器ip或者域名进行访问，由设置的服务器ip或域名去获取访问内容并返回
   - 反向代理不需要做任何设置，直接访问真实服务器ip或域名，但是服务器内部会自动根据访问内容进行跳转及内容返回，你不知道它最终访问的是哪些机器
3. 客户端是否需要配置
   - 正向代理客户端需要配置
   - 反向代理不需要

<img src=".\正向代理与反向代理.assets\image-20200228174941589.png" alt="image-20200228174941589" style="zoom:40%;" />

正向代理中，proxy和client同属一个LAN，对server透明； 反向代理中，proxy和server同属一个LAN，对client透明。 实际上proxy在两种代理中做的事都是代为收发请求和响应，不过从结构上来看正好左右互换了下，所以把前者那种代理方式叫做正向代理，后者叫做反向代理。



### 3.用途

- 正向代理：翻墙
- 反向代理：
  1. 保护和隐藏原始资源服务器
  2. 加密和SSL加速
  3. 负载均衡
  4. 缓存静态内容
  5. 压缩
  6. 减速上传
  7. 安全
  8. 外网发布